import{_ as e,d as n,r as t,g as r,n as a,v as u,f as o,s as i,a as c,b as l,c as f,e as s,h as d,i as v,m,j as p,k as g,l as h,o as E,p as b,q as w,t as k,u as O,w as R,R as y,x,y as C,z as A,A as D,B as N,C as S,D as j,E as L}from"./vendor.df73a576.js";function U(e){return"application/json"===e.type}function M(n,t){var r=new FileReader;r.readAsText(n,"UTF-8"),r.onload=function(n){return e(t,n.target.result)}}function I(e){return n(JSON.parse(e))}function _(e){e.stopPropagation(),e.preventDefault()}!function(e=".",n="__import__"){try{self[n]=new Function("u","return import(u)")}catch(t){const r=new URL(e,location),a=e=>{URL.revokeObjectURL(e.src),e.remove()};self[n]=e=>new Promise(((t,u)=>{const o=new URL(e,r);if(self[n].moduleMap[o])return t(self[n].moduleMap[o]);const i=new Blob([`import * as m from '${o}';`,`${n}.moduleMap['${o}']=m;`],{type:"text/javascript"}),c=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(i),onerror(){u(new Error(`Failed to import: ${e}`)),a(c)},onload(){t(self[n].moduleMap[o]),a(c)}});document.head.appendChild(c)})),self[n].moduleMap={}}}("/quick-translate/assets/");function F(e,n){return{value:n,expr:void 0!==e?u(e):void 0,readOnly:!1,width:void 0}}var J={make:F,makeRO:function(e){var n=F(void 0,e);return{value:n.value,expr:n.expr,readOnly:!0,width:n.width}},empty:function(e){return{value:" ",expr:void 0,readOnly:!1,width:100}},emptyRO:function(e){return{value:" ",expr:void 0,readOnly:!0,width:100}}};function $(e){var n=e.split(".");return 1===n.length?e:s(n,0,n.length-1|0).join("")}function q(e,n,t){var r=void 0===n||n,a=document.createElement("a"),o=document.body;if(void 0!==a&&void 0!==o){var i=u(o),c=u(a);c.setAttribute("style","display: none"),c.setAttribute("href",t),c.setAttribute("download",e),r&&c.setAttribute("target","_blank"),i.appendChild(c),c.click(),i.removeChild(c)}}function B(e,n,t){var a=v(m(e,(function(e){return[e.id,e.defaultMessage]}))),u=p(r(n,0),[],(function(e){return d(e,[J.makeRO($(t))])})),i=m(g(n,1),(function(e){var n=p(o(r(e,0),(function(e){return E(a,e.value)})),J.empty(void 0),(function(e){return J.make(void 0,e)}));return d(e,[n])}));return d([u],i)}function P(e){var n=function(e){var n=[[]],t=new RegExp('(;|\r?\n|\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^;\r\n]*))',"gi");return function(l){for(;;){var f=t.exec(e);if(null===f)return;var s=r(f,1);void 0!==s&&";"!==a(u(s))&&n.push([]);var d=r(f,2),v=void 0!==d?o(a(u(d)),(function(e){return e.replace(/[""]+/g,'"')})):o(r(f,3),(function(e){return null==e?void 0:i(e)}));c(r(n,n.length-1|0),[]).push(c(v,""))}}(),n}(e),t=p(r(n,1),[],(function(e){return m(e,J.makeRO)})),l=m(g(n,2),(function(e){return b(e,(function(e,n){return e>0?J.make(void 0,n):J.makeRO(n)}))}));return d([t],l)}function T(e,n){return w(c(r(e,0),[]),(function(e){return e.value===n}))}var V=function(e,n){var t=n.row,r=n.col,a=f(f(e,t),r);return l(f(e,t),r,{value:n.value,expr:a.expr,readOnly:a.readOnly,width:a.width})};function H(e,n){var t=JSON.stringify(function(e,n){var t=T(e,n),a=g(e,1);return void 0!==t?k(a,(function(e){var n=r(e,0),a=r(e,t);if(void 0!==n&&void 0!==a)return{id:n.value,defaultMessage:a.value}})):[]}(e,n),null,2);return"data:text/json;charset=utf-8,"+encodeURIComponent(t)}function z(e,n,t){return n?function(e,n){return e+" "+n}(e,t):e}var G=function(e){var n=e.sourceAvailable,r=e.children;return t.createElement("div",{className:z("Content",n,"with-margin")},r)};var K=function(e){var n=e.disabled,r=e.onClick,a=e.children,u=void 0!==n&&n,o=z("SidebarButton",u,"disabled");return t.createElement("button",{className:o,disabled:u,onClick:r},a)};var Q=function(e){var n=e.sourceAvailable,r=e.children;return n?t.createElement("aside",{className:"Sidebar"},r):null};var W=function(e){var n=e.sourceAvailable,r=e.dragging;return n||r?null:t.createElement("div",{className:"NoDataView"},t.createElement("span",void 0,"No data."),t.createElement("span",void 0,"Please drag a JSON language file or CSV here."))};function X(n){var r=n.title,a=n.onDrop,u=function(n){var r=t.useState((function(){return!1})),a=r[1],u=r[0];return[u,function(n){if(_(n),!u)return e(a,(function(e){return!0}))}]}();return t.createElement("div",{className:z("HoverHighlight",u[0],"dragging"),onDragOver:u[1],onDrop:a},r)}var Y=function(e){var n=e.dragging,r=e.sourceAvailable,a=e.onDragLeave,u=e.handleDrop;return n?t.createElement("div",{className:"ImportOverlay",onDragLeave:a},t.createElement(X,{title:"Insert source language file here",onDrop:function(e){return R(u,e,0)}}),r?t.createElement(X,{title:"Insert target language file here",onDrop:function(e){return R(u,e,1)}}):null):null};var Z=function(n){var a=t.useState((function(){return[]})),u=a[1],i=a[0],l=function(n){var r=t.useState((function(){return!1})),a=r[1],u=r[0];return[u,a,function(n){if(_(n),!u)return e(a,(function(e){return!0}))},function(n){if(_(n),u)return e(a,(function(e){return!1}))}]}(),f=l[1],s=l[0],v=0!==i.length,g=function(n){if(window.confirm("Remove source?"))return e(u,(function(e){return[]}))};return t.createElement("div",{className:"App",onDragOver:l[2]},t.createElement(G,{sourceAvailable:v,children:null},t.createElement(y,{data:i,valueRenderer:function(e){return e.value},sheetRenderer:function(n){return t.createElement("table",{className:n.className},t.createElement("thead",void 0,t.createElement("tr",void 0,b(c(r(i,0),[]),(function(n,r){return t.createElement("th",{key:String(n)},n>0?t.createElement(t.Fragment,void 0,t.createElement("button",{onClick:function(e){var n=r.value;return q(n+".json",void 0,H(i,n))}},"Export JSON")," ",t.createElement("button",{onClick:function(n){var t=r.value;if(window.confirm('Delete column "'+t+'"?'))return e(u,(function(e){return function(e,n){var t=T(e,n);return void 0!==t?m(e,(function(e){return k(b(e,(function(e,n){return t===e?void 0:n})),(function(e){return e}))})):e}(i,t)}))}},"Remove")):t.createElement("button",{onClick:g},"Remove source"))})))),t.createElement("tbody",void 0,n.children))},onCellsChanged:function(n){var t=i.slice(0);return D(n,(function(e){return V(t,e)})),e(u,(function(e){return t}))}}),t.createElement(W,{sourceAvailable:v,dragging:s}),t.createElement(Y,{dragging:s,sourceAvailable:v,onDragLeave:l[3],handleDrop:function(n,t){_(n);var a=function(e){return e.nativeEvent.dataTransfer.files}(n);if(1===a.length){var c=r(a,0);void 0!==c&&(t?U(c)&&M(c,(function(n){return e(u,(function(e){return p(I(n),i,(function(e){return B(e,i,c.name)}))}))})):U(c)?M(c,(function(n){return e(u,(function(e){return p(I(n),i,(function(e){return function(e,n){var t=m(e,(function(e){return[J.makeRO(e.id),J.make(void 0,e.defaultMessage)]}));return d([[J.makeRO("ID"),J.makeRO($(n))]],t)}(e,c.name)}))}))})):"text/csv"===c.type&&M(c,(function(n){return e(u,(function(e){return P(n)}))})))}else x(C(m(a,(function(e){return S(j((function(n){if(1===t&&U(e))return M(e,n)})),(function(n){return o(I(n),(function(n){return[e.name,n]}))}))}))),(function(n){return e(u,(function(e){return function(e,n){return h(e,n,(function(e,n){return B(n[1],e,n[0])}))}(k(n,(function(e){return e})),i)}))}));return e(f,(function(e){return!1}))}})),t.createElement(Q,{sourceAvailable:v,children:null},t.createElement(K,{onClick:function(n){var t,r=(t="Enter file name for target",O(window.prompt(t)));return A(r,(function(n){return e(u,(function(e){return B([],i,n)}))}))},children:"Add language"}),t.createElement(K,{onClick:function(e){return q("export.csv",void 0,function(e){var n=m(e,(function(e){return m(e,(function(e){return'"'+e.value+'"'})).join(";")})).join("\n");return"data:text/csv;charset=utf-8,\ufeff"+encodeURI(n)}(i))},children:"Export CSV"}),t.createElement(K,{onClick:function(e){return N(c(r(i,0),[]),(function(e,n){if(e>0)return q(n.value+".json",void 0,H(i,n.value))}))},children:"Export all JSON"})))};A(a(document.querySelector("#root")),(function(e){L.render(t.createElement(Z,{}),e)}));
